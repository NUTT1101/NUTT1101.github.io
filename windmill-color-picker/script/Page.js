import{ColorProject}from"./ColorProject.js";import{Windmill}from"./Windmill.js";import{ColorRegion}from"./ColorRegion.js";import{ColorSet}from"./ColorSet.js";import{Color}from"./Color.js";export class Page{static windmill;static init(){Page.title(),Page.copyright(),Page.createWindmill(),Page.switchPageButtonEvent(),Page.scrollButtonEvent(),Page.resetButtonEvent(),Page.pickerChangeEvent(),Page.resultButtonEvent(),Page.aboutButtonEvent(),ColorRegion.init()}static title(){document.title=ColorProject.fullProjectName,document.querySelector("#title").textContent=ColorProject.projectName}static copyright(){document.querySelector("#footer").innerHTML=ColorProject.copyright}static aboutButtonEvent(){Page.aboutButton.addEventListener("click",(()=>{Page.dialogTitle.textContent=`關於 ${ColorProject.fullProjectName}`;let t=document.createElement("div");t.innerHTML=`<h5 style='color: red;'>主旨 :</h5> \n                <p>使用者可透過不同模式的配色設定，調整風車葉片的顏色，並藉由視覺暫留的原理達成顏色混和的效果。</p>                <h5 style='color: red;'>協作人員:</h5> \n                <p><b>傳藝-莊棣蓉</b>: 提出主題概念。</p>\n                <p><b>傳藝-張維玲</b>: 風車圖案設計、顏色校調、簡報製作。</p>\n                <p><b>資工-陳彥均</b>: 提出網頁介面模型。</p>\n                <p><b>資工-石育芷</b>: 網頁按鈕樣式設計。</p>\n                <p><b>資工-張鋒石</b>: 網頁撰寫。</p>\n                <h5 style='color: red;'>原始碼及技術說明:</h5>\n                <p>GitHub: <a href='${ColorProject.githubLink}'>${ColorProject.fullProjectName}</a></p>`,Page.dialogContent.innerHTML=t.outerHTML}))}static resultButtonEvent(){const t=Page.resultButton;Page.dialogTitle.textContent="混色結果",t.addEventListener("click",(()=>{let t=Page.windmill.getColorSet.colors,e=Page.colorDialogParent();for(let o=0;o<t.length;o++){let l=t[o];if(l.includes("rgb")){let t=Color.splitRGBString(l);l=Color.rgbToHex(t.r,t.g,t.b)}e.appendChild(Page.colorDialogContent(`第 ${o+1} 個 : ${l.toUpperCase()} `,l))}let o=Color.colorMix(t);e.appendChild(Page.colorDialogContent(`混色結果 : ${o.toUpperCase()} `,o)),Page.dialogContent.innerHTML=e.outerHTML}))}static colorDialogParent(){let t=document.createElement("div");return t.style.maxWidth="max-content",t.style.margin="0 auto 0",t.setAttribute("class","ml-auto"),t}static colorDialogContent(t,e){let o=document.createElement("div"),l=document.createElement("a"),r=document.createElement("a");return l.textContent=t,r.style.background=e,r.textContent="-------",r.style.color=e,o.appendChild(l),o.appendChild(r),o}static pickerChangeEvent(){const t=Page.colorPicker;t.addEventListener("change",(()=>{ColorRegion.setBlockColor(ColorRegion.geClickedtBlock,t.value);let e=Page.colorRegion;Page.windmill.setColors=new ColorSet(Array.from(e.children).map((t=>t.style.backgroundColor))),Page.localWindmillUpdate()}))}static switchPageButtonEvent(){let t=document.getElementsByClassName("nav-item");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(()=>{if(!t[e].firstChild.classList.contains("active")){t[e].firstChild.classList.add("active");for(let o=0;o<t.length;o++)e!=o&&t[o].firstChild.classList.contains("active")&&t[o].firstChild.classList.remove("active");let o=Page.getWhichRegion(e);ColorRegion.update(o)}}))}static getWhichRegion(t){switch(t){case 0:default:return 2;case 1:return 4;case 2:return 8}}static scrollButtonEvent(){Page.scrollButton.addEventListener("click",(function(){let t=Page.windmillElement;null==t.getAttribute("class")||"scroll-slowdown"==t.getAttribute("class")||""==t.getAttribute("class")?t.setAttribute("class","scrollable"):"scrollable"==t.getAttribute("class")?t.setAttribute("class","scroll-slowdown"):t.setAttribute("class","")}))}static resetButtonEvent(){Page.resetButton.addEventListener("click",(function(){switch(ColorRegion.currentPage){case 2:Page.windmill.setColors=ColorProject.defaultTwoColors;break;case 4:Page.windmill.setColors=ColorProject.defaultFourColors;break;case 8:Page.windmill.setColors=ColorProject.defaultEightColors}ColorRegion.update(ColorRegion.currentPage)}))}static createWindmill(){Page.windmill=new Windmill(ColorProject.defaultTwoColors,!1),Page.globalWindmillUpdate()}static localWindmillUpdate(){let t=document.getElementsByTagName("path");for(let e=0;e<t.length;e++)t[e].style.fill=Page.windmill.blades[e].style.fill}static globalWindmillUpdate(){let t=document.getElementsByClassName("windmill");Array.from(t).forEach((t=>{t.innerHTML=Page.windmill.getWindmill.innerHTML}))}static get windmillElement(){return document.querySelector("#svg37")}static get colorPicker(){return window.screen.width<1e3?document.querySelectorAll("shop-color-picker")[1]:document.querySelectorAll("shop-color-picker")[0]}static get colorRegion(){return document.querySelector("#color-region")}static get resultButton(){return document.querySelector("#result-button")}static get aboutButton(){return document.querySelector("#about-button")}static get resetButton(){return document.querySelector("#reset-button")}static get scrollButton(){return document.querySelector("#scroll-button")}static get dialogContent(){return document.querySelector("#content-result")}static get dialogTitle(){return document.querySelector("#modal-title")}}